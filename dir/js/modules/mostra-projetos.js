import{fetchApi}from"./fetch.js";import{getLocalStorage,setLocalStorage}from"./localStorage.js";import{initAnimeFetch,initAnimeDefault}from"./animeScroll.js";export function initProjetos(){const e=document.querySelector("[data-projetos]"),t=document.querySelector(".erro--fetch");if(!e)return;const o=t=>{let o=12;"home"===e.getAttribute("data-projetos")&&(o=3),t.forEach((r=>{if(t.indexOf(r)+1>o)return;const n=(e=>{const t=document.createElement("p");return e.forEach((e=>{const o=document.createElement("span");o.innerHTML=e,t.appendChild(o)})),t.innerHTML})(r.tags),i=document.createElement("li");i.setAttribute("data-anime","bottom"),i.innerHTML=`\n        <picture>\n          <source srcset="${r.thumb_webp}" type="image/webp">\n          <img width="350" width="250" src="${r.thumb}" alt="Projeto ${r.title}">\n        </picture>\n        <div class="thumbs__info">\n          <div class="info_content">\n            <h3>${r.title}</h3>\n            <p class="tags">${n}</p>\n            <a href="./projetos/${r.slug}.html" class="btn btn--border" title="Ver projeto">Ver projeto</a>\n          </div>\n        </div>\n      `,e.appendChild(i)})),r(),initAnimeFetch()};fetchApi("https://rest.dsouza.com.br/wp-json/dsProjetos/v1/projetos",(e=>{o(e),setLocalStorage("projetos",JSON.stringify(e)),t.remove()}),(()=>{const e=getLocalStorage("projetos");if(null===e)return t.innerHTML="NÃ£o foi possÃ­vel carregar os itensâ€¦ Tente novamente mais tarde, obrigado ðŸ˜…",void initAnimeDefault();o(JSON.parse(e)),t.remove()}));const r=()=>{const e=document.querySelectorAll("[data-projetos] li");e&&e.forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.querySelector("a").getAttribute("href");location.href=t}))}))}}